,Consolidated Statements of Cash Flows - USD ($) $ in Thousands,12 Months Ended,12 Months Ended,12 Months Ended,12 Months Ended,12 Months Ended
,Consolidated Statements of Cash Flows - USD ($) $ in Thousands.1,"Dec. 31, 2018","Dec. 31, 2017","Dec. 31, 2017.1","Dec. 31, 2016","Dec. 31, 2016.1"
"('Consolidated Statements of Cash Flows - USD ($) $ in Thousands', 'Consolidated Statements of Cash Flows - USD ($) $ in Thousands')",,,,,,
Cash flows from operating activities:,,,,,,
Net loss,, -26704, -116846,[1][2], -414249,[1][2]
Adjustments to reconcile net loss to net cash provided by operating activities:,,,,,,
Depreciation and amortization,,149604,113875,[2],83082,[2]
Amortization of deferred commissions,,143358,99105,[2],69565,[2]
Amortization of debt discount and issuance costs,,52733,53394,[2],33278,[2]
Stock-based compensation,,543953,394004,[2],317654,[2]
Deferred income tax,,-34180,-5724,[2],-658,[2]
Gain on marketable equity securities,,-19257,0,[2],0,[2]
Repayments of convertible senior notes attributable to debt discount,,-145349,0,[2],0,[2]
Other,,6177,-905,[2],3764,[2]
"Changes in operating assets and liabilities, net of effect of business combinations:",,,,,,
Accounts receivable,,-146148,-99693,[2],-126415,[2]
Deferred commissions,,-239382,-190246,[2],-151921,[2]
Prepaid expenses and other assets,,-19886,-34288,[2],-24164,[2]
Accounts payable,,-4757,-5504,[2],-3554,[2]
Deferred revenue,,468856,369242,[2],285139,[2]
Accrued expenses and other liabilities,,82071,66526,[2],87560,[2]
Net cash provided by operating activities,,811089,642940,[2],159081,[2]
Cash flows from investing activities:,,,,,,
Purchases of property and equipment,,-224462,-150510,[2],-105562,[2]
"Business combinations, net of cash and restricted cash acquired",,-37440,-58203,[2],-34297,[2]
Purchases of other intangibles,,-24400,-6670,[2],-18750,[2]
Purchases of investments,,-1285943,-1189511,[2],-518664,[2]
Purchases of strategic investments,,-9839,-4750,[2],-500,[2]
Sales of investments,,39975,85106,[2],297998,[2]
Maturities of investments,,1194687,440590,[2],271537,[2]
Net cash used in investing activities,,-347422,-883948,[2],-108238,[2]
Cash flows from financing activities:,,,,,,
Net proceeds from borrowings on convertible senior notes,,0,772127,[2],0,[2]
Repayments of convertible senior notes attributable to principal,,-429645,-4,[2],0,[2]
Proceeds from issuance of warrants,,0,54071,[2],0,[2]
Purchases of convertible note hedges,,0,-128017,[2],0,[2]
Repurchases and retirement of common stock,,0,-55000,[2],0,[2]
Proceeds from employee stock plans,,104160,82567,[2],66378,[2]
Taxes paid related to net share settlement of equity awards,,-281010,-181938,[2],-119907,[2]
Payments on financing obligations,,-933,-4914,[2],-2223,[2]
Net cash (used in) provided by financing activities,,-607428,538892,[2],-55752,[2]
"Foreign currency effect on cash, cash equivalents and restricted cash",,-15530,28013,[2],-5945,[2]
"Net (decrease) increase in cash, cash equivalents and restricted cash",,-159291,325897,[2],-10854,[2]
"Cash, cash equivalents and restricted cash at beginning of period",[2],727829,401932,,412786,
"Cash, cash equivalents and restricted cash at end of period",,568538,727829,[2],401932,[2]
"Cash, cash equivalents and restricted cash at end of period:",,,,,,
"Total cash, cash equivalents and restricted cash shown in the consolidated statement of cash flows",,568538,401932,[2],401932,[2]
Supplemental disclosures of other cash flow information:,,,,,,
"Income taxes paid, net of refunds",,17507,7899,[2],4338,[2]
Non-cash investing and financing activities:,,,,,,
Settlement of 2018 Notes conversion feature,,773302,0,[2],0,[2]
Benefit from exercise of 2018 Note Hedge,,766858,0,[2],0,[2]
Property and equipment included in accounts payable and accrued expenses,,25767,15007,[2],15381,[2]
Purchases of intangible assets included in accrued expenses and other liabilities,, 8500, 6750,[2], 6210,[2]
,,,,,,
[1] As adjusted to reflect the impact of the full retrospective adoption of Topic 606. [2] As adjusted to reflect the impact of the full retrospective adoption of Topic 606.,[1] As adjusted to reflect the impact of the full retrospective adoption of Topic 606. [2] As adjusted to reflect the impact of the full retrospective adoption of Topic 606.,[1] As adjusted to reflect the impact of the full retrospective adoption of Topic 606. [2] As adjusted to reflect the impact of the full retrospective adoption of Topic 606.,[1] As adjusted to reflect the impact of the full retrospective adoption of Topic 606. [2] As adjusted to reflect the impact of the full retrospective adoption of Topic 606.,[1] As adjusted to reflect the impact of the full retrospective adoption of Topic 606. [2] As adjusted to reflect the impact of the full retrospective adoption of Topic 606.,[1] As adjusted to reflect the impact of the full retrospective adoption of Topic 606. [2] As adjusted to reflect the impact of the full retrospective adoption of Topic 606.,
